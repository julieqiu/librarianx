version: v1
language: dart

sources:
  googleapis:
    url: https://github.com/googleapis/googleapis/archive/fef700942b6a3ef8bbaf253306a0a652a1858552.tar.gz
    sha256: df47fc8368ce3e02f12e857dbb73d0631c35a5860527629cc37214e307a726f3
  protobuf:
    url: https://github.com/protocolbuffers/protobuf/releases/download/v29.3/protobuf-29.3.tar.gz
    sha256: 008a11cc56f9b96679b4c285fd05f46d317d685be3ab524b2a310be0fbad987e
    extracted_name: protobuf-29.3
    subdir: src

defaults:
  generate_dir: generated/
  packaging: version
  dart:
    copyright_year: 2025
    issue_tracker_url: https://github.com/googleapis/google-cloud-dart/issues
    package_dependencies:
      - name: googleapis_auth
        package: googleapis_auth
        version: ^2.0.0
      - name: http
        package: http
        version: ^1.3.0
      - name: google_cloud_api
        package: google_cloud_api
        version: ^0.2.0
      - name: google_cloud_iam_v1
        package: google_cloud_iam_v1
        version: ^0.2.0
      - name: google_cloud_protobuf
        package: google_cloud_protobuf
        version: ^0.2.0
      - name: google_cloud_location
        package: google_cloud_location
        version: ^0.2.0
      - name: google_cloud_longrunning
        package: google_cloud_longrunning
        version: ^0.2.0
      - name: google_cloud_rpc
        package: google_cloud_rpc
        version: ^0.2.0
      - name: google_cloud_type
        package: google_cloud_type
        version: ^0.2.0
    proto_mappings:
      - proto: google.api
        import: package:google_cloud_api/api.dart
      - proto: google.cloud.common
        import: package:google_cloud_common/common.dart
      - proto: google.cloud.location
        import: package:google_cloud_location/location.dart
      - proto: google.iam.v1
        import: package:google_cloud_iam_v1/iam.dart
      - proto: google.longrunning
        import: package:google_cloud_longrunning/longrunning.dart
      - proto: google.protobuf
        import: package:google_cloud_protobuf/protobuf.dart
      - proto: google.rpc
        import: package:google_cloud_rpc/rpc.dart
      - proto: google.type
        import: package:google_cloud_type/type.dart

release:
  tag_format: '{name}/v{version}'

# No auto-discovery - Dart is a new repo, explicitly list what to generate
auto_discover: false

libraries:
  # Common protos (shared libraries)
  - google/api
  - google/cloud/common
  - google/iam/v1
  - google/cloud/location
  - google/longrunning
  - google/protobuf
  - google/rpc
  - google/type

  # Service APIs
  - google/cloud/functions/v2
  - google/cloud/language/v2
  - google/cloud/secretmanager/v1

  # AI APIs need special config
  - google/ai/generativelanguage/v1beta:
      dart:
        api_keys_environment_variables: GOOGLE_API_KEY
        dev_dependencies:
          - googleapis_auth

  - google/cloud/aiplatform/v1beta1:
      dart:
        api_keys_environment_variables: GOOGLE_API_KEY
        dev_dependencies:
          - googleapis_auth
        proto_mappings:
          - proto: google.protobuf
            prefix: protobuf
        readme_after_title_text: |
          > [!TIP]
          > Flutter applications should use
          > [Firebase AI Logic](https://firebase.google.com/products/firebase-ai-logic).
          >
          > The Vertex AI API is meant for Dart command-line, cloud, and server applications.
          > For mobile and web applications, see instead
          > [Firebase AI Logic](https://firebase.google.com/products/firebase-ai-logic), which provides
          > client-side access to both the Gemini Developer API and Vertex AI.
