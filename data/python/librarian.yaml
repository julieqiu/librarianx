version: v1
language: python

sources:
  googleapis:
    url: TBD
    sha256: TBD

defaults:
  generate_dir: packages/
  packaging: service
  transport: grpc+rest
  rest_numeric_enums: true

release:
  tag_format: '{name}/v{version}'

# Auto-discover everything from googleapis
auto_discover: true

# Only configure exceptions to the defaults
# NOTE: With auto_discover enabled, only list libraries that need special configuration
# These entries use API paths as keys (e.g., google/cloud/automl/v1)
libraries:
  # Service-level entry: covers all versions (v1, v1beta1, etc.)
  # For Python, service-level packaging groups all versions into one package
  - google/cloud/automl/v1:
      keep:
        - docs/automl_v1beta1/tables.rst
        - google/cloud/automl_v1beta1/services/tables
        - samples/README
        - tests/unit/test_gcs_client_v1beta1.py
        - tests/unit/test_tables_client_v1beta1.py

  - google/cloud/bigquery/storage/v1:
      keep:
        - docs/.*/library.rst
        - docs/samples
        - google/cloud/bigquery_storage_v1/client.py
        - google/cloud/bigquery_storage_v1/exceptions.py
        - google/cloud/bigquery_storage_v1/gapic_types.py
        - google/cloud/bigquery_storage_v1/reader.py
        - google/cloud/bigquery_storage_v1/writer.py
        - google/cloud/bigquery_storage_v1beta2/client.py
        - google/cloud/bigquery_storage_v1beta2/exceptions.py
        - google/cloud/bigquery_storage_v1beta2/writer.py
        - CONTRIBUTING
        - samples/__init__.py
        - samples/conftest.py
        - samples/pyarrow
        - samples/quickstart
        - samples/snippets
        - samples/to_dataframe
        - scripts/readme-gen
        - testing/.gitignore
        - tests/unit/.*.py

  - google/cloud/containeranalysis/v1:
      keep:
        - tests/unit/test_get_grafeas_client.py

  - google/cloud/monitoring/v3:
      keep:
        - docs/query.rst
        - google/cloud/monitoring_v3/_dataframe.py
        - google/cloud/monitoring_v3/query.py
        - tests/unit/test__dataframe.py
        - tests/unit/test_query.py

  - google/cloud/orgpolicy/v2:
      keep:
        - pytest.ini
        - google/cloud/orgpolicy/v1/__init__.py
        - tests/unit/test_packaging.py

  - google/cloud/oslogin/v1:
      keep:
        - google/cloud/oslogin_v1/common
        - docs/oslogin_v1/common/types.rst

  - google/cloud/speech/v1:
      keep:
        - google/cloud/speech_v1/helpers.py
        - tests/unit/test_helpers.py

  - google/cloud/translate/v3:
      keep:
        - docs/client.rst
        - docs/v2.rst
        - google/cloud/translate_v2
        - tests/unit/v2

  - google/cloud/vision/v1:
      keep:
        - google/cloud/vision_helpers
        - tests/unit/test_decorators.py
        - tests/unit/test_helpers.py

  - grafeas:
      name: grafeas
      path: packages/grafeas/
      keep:
        - grafeas/grafeas.py
        - grafeas/grafeas/__init__.py
        - grafeas/grafeas/grafeas_v1/types.py
