# Example: Complete librarian.yaml for google-cloud-go
# This shows what the format would look like with ALL data from .librarian preserved

version: v1
language: go

container:
  image: us-central1-docker.pkg.dev/cloud-sdk-librarian-prod/images-prod/librarian-go
  tag: f2cbb6b904fdbf086efec0100536c52a79a654a5b9df21f975a2b6f6d50395a4

sources:
  googleapis:
    url: https://github.com/googleapis/googleapis/archive/abc123.tar.gz
    sha256: abc123def456...

global:
  files_allowlist:
    - path: "internal/generated/snippets/go.mod"
      permissions: read-write
    - path: "CHANGES.md"
      permissions: read-write

defaults:
  generate:
    output: '{name}/'

release:
  tag_format: '{name}/v{version}'

libraries:
  # Example 1: Simple generated library
  - name: accessapproval
    version: 1.8.8

    source_roots:
      - accessapproval
      - internal/generated/snippets/accessapproval

    release:

    generate:
      apis:
        - path: google/cloud/accessapproval/v1

      keep: []  # Empty preserve_regex

  # Example 2: Handwritten library (release disabled)
  - name: auth
    version: 0.10.0
    release:
      disabled: true  # From config.yaml

  # Example 3: Library with custom keep patterns
  - name: batch
    version: 1.13.0

    source_roots:
      - batch
      - internal/generated/snippets/batch

    release:

    generate:
      apis:
        - path: google/cloud/batch/v1

      keep:
        - ^batch/apiv1/iam_policy_client\.go$  # Handwritten IAM client

  # Example 4: Library with multiple APIs
  - name: bigquery
    version: 1.72.0

    source_roots:
      - bigquery
      - internal/generated/snippets/bigquery

    release:
      disabled: true  # Hybrid library with handwritten code

    generate:
      apis:
        - path: google/cloud/bigquery/analyticshub/v1
        - path: google/cloud/bigquery/biglake/v1
        - path: google/cloud/bigquery/connection/v1
        - path: google/cloud/bigquery/datapolicies/v1
        - path: google/cloud/bigquery/datatransfer/v1
        - path: google/cloud/bigquery/migration/v2
        - path: google/cloud/bigquery/reservation/v1
        - path: google/cloud/bigquery/storage/v1

      keep:
        - ^internal/generated/snippets/bigquery/v2/

  # Example 5: Library with custom client directory
  - name: monitoring
    version: 1.23.0

    source_roots:
      - monitoring
      - internal/generated/snippets/monitoring

    release:
      disabled: true

    generate:
      apis:
        - path: google/monitoring/v3
          client_directory: apiv3/v2  # Custom client location

  # Example 6: Library with disabled GAPIC
  - name: bigtable
    version: 1.40.1

    source_roots:
      - bigtable
      - internal/generated/snippets/bigtable

    release:
      disabled: true  # Handwritten library

    generate:
      apis:
        - path: google/bigtable/v2
          disable_gapic: true  # Handwritten client, skip GAPIC

        - path: google/bigtable/admin/v2
          disable_gapic: true  # Handwritten admin client

  # Example 7: Library with module_path_version (v2 module)
  - name: dataproc
    version: 5.23.0
    module_path_version: v2  # Creates cloud.google.com/go/dataproc/v2

    source_roots:
      - dataproc
      - internal/generated/snippets/dataproc

    release:

    generate:
      apis:
        - path: google/cloud/dataproc/v1

  # Example 8: Library with custom proto package
  - name: maps
    version: 1.17.0

    source_roots:
      - maps
      - internal/generated/snippets/maps

    release:

    generate:
      apis:
        - path: google/maps/fleetengine/v1
          proto_package: maps.fleetengine.v1  # Custom proto package

        - path: google/maps/fleetengine/delivery/v1
          proto_package: maps.fleetengine.delivery.v1

  # Example 9: Library with nested protos
  - name: containeranalysis
    version: 0.12.7

    source_roots:
      - containeranalysis
      - internal/generated/snippets/containeranalysis

    release:

    generate:
      apis:
        - path: google/devtools/containeranalysis/v1beta1
          nested_protos:
            - grafeas/grafeas.proto  # Include this nested proto

  # Example 10: Library with delete_output_paths
  - name: storage
    version: 1.57.1

    source_roots:
      - storage
      - internal/generated/snippets/storage

    release:
      disabled: true  # Hybrid library

    generate:
      apis:
        - path: google/storage/control/v2
        - path: google/storage/v2

      delete_output_paths:
        - internal/generated/snippets/storage/internal

